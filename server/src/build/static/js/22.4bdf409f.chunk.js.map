{"version":3,"sources":["action/evaluateAction.js","page/EvaluateDepartment.js"],"names":["getEvaluated","payload","a","MaChiBo","Nam","MaSoDangVien","path","push","console","log","axios","get","join","res","status","error","response","data","msg","getTimeEvaluate","checkIsOpen","id","setTimeEvaluate","pmFrom","pmTo","subjectFrom","subjectTo","departmentFrom","departmentTo","year","post","resetStatus","MaDVDG","ThoiGianBatDau","ThoiGianKetThuc","TrangThai","resPm","resSubject","resDepartment","useStyles","makeStyles","theme","header","marginBottom","headerContent","textTransform","fontWeight","table","width","backgroundColor","marginTop","paper","padding","flexContainer","display","alignItems","flexWrap","margin","inputSelect","marginRight","marginLeft","paperStatistic","paperWrapper","cursor","palette","common","white","EvaluateDepartment","classes","useContext","InfoContext","info","infoDispatch","CategoryContext","category","categoryDispatch","SnackbarContext","openSnackbarDispatch","openSnackbar","LoadingContext","loadingDispatch","loading","columns","title","field","render","params","value","DanhGiaKhoa","onChange","e","handleChange","gradeArr","length","map","el","MaLoai","TenLoai","useState","rows","setRows","Date","getFullYear","setYear","setGradeArr","loadingTable","setLoadingTable","setField","isTime","NgayBatDau","NgayKetThuc","setIsTime","firstLoading","setFirstLoading","target","fetchAPI","type","message","handleSubmit","useEffect","getAllCategory","checkTime","ThoiGianKetThucCheck","getTimeWithEndHour","ThoiGianBatDauCheck","getTimeWithStartHour","categories","grade","Data","sidebar","className","variant","style","getLocaleDate","nameTitle","autowidth","partycell","TenChiBo","onClick","primary","maxWidth","components","Container","props","options","isLoading"],"mappings":"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","file":"static/js/22.4bdf409f.chunk.js","sourcesContent":["import axios from \"../helper/axios\"\r\n\r\nexport const getEvaluated = async (payload) => {\r\n    try {\r\n        const { MaChiBo, Nam, MaSoDangVien } = payload;\r\n        let path = [];\r\n        if (Nam) path.push(`Nam=${Nam}`)\r\n        if (MaChiBo) path.push(`MaChiBo=${MaChiBo}`)\r\n        if (MaSoDangVien) path.push(`MaSoDangVien=${MaSoDangVien}`);\r\n        console.log(path);\r\n        const res = await axios.get(`/api/evaluate/getevaluated?` + path.join('&'));\r\n        if (res.status == 200) {\r\n            return res;\r\n        }\r\n    } catch (error) {\r\n        return { error: error.response.data.msg }\r\n        console.log(error.response)\r\n    }\r\n}\r\n\r\nexport const getTimeEvaluate = async (payload) => {\r\n    try {\r\n        const res = await axios.get(`/api/evaluate/gettime?Nam=${payload.Nam}`)\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n            return res.data;\r\n        }\r\n    } catch (error) {\r\n        console.log(error.response)\r\n    }\r\n}\r\n\r\nexport const checkIsOpen = async (payload) => {\r\n    try {\r\n        const res = payload.id\r\n            ? await axios.get(`/api/evaluate/checkopen?MaDVDG=${payload.id}`)\r\n            : await axios.get(`/api/evaluate/checkopen`)\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n            return res.data[0];\r\n        }\r\n    } catch (error) {\r\n        console.log(error.response)\r\n    }\r\n}\r\n\r\nexport const setTimeEvaluate = async (payload) => {\r\n    const { pmFrom, pmTo, subjectFrom, subjectTo, departmentFrom, departmentTo, year } = payload\r\n    try {\r\n\r\n        const resetStatus = await axios.post('/api/evaluate/resetstatus')\r\n        console.log(resetStatus);\r\n        \r\n        const resPm = await axios.post('/api/evaluate/settime', {\r\n            Nam: year,\r\n            MaDVDG: 1,\r\n            ThoiGianBatDau: pmFrom,\r\n            ThoiGianKetThuc: pmTo,\r\n            TrangThai: 1\r\n        })\r\n        const resSubject = await axios.post('/api/evaluate/settime', {\r\n            Nam: year,\r\n            MaDVDG: 2,\r\n            ThoiGianBatDau: subjectFrom,\r\n            ThoiGianKetThuc: subjectTo,\r\n            TrangThai: 1\r\n        })\r\n        const resDepartment = await axios.post('/api/evaluate/settime', {\r\n            Nam: year,\r\n            MaDVDG: 3,\r\n            ThoiGianBatDau: departmentFrom,\r\n            ThoiGianKetThuc: departmentTo,\r\n            TrangThai: 1\r\n        })\r\n        console.log(resPm)\r\n        console.log(resSubject)\r\n        console.log(resDepartment)\r\n        return resDepartment;\r\n    } catch (error) {\r\n        console.log(error.response)\r\n    }\r\n}","import MaterialTable from '@material-table/core';\r\nimport {\r\n    Grid, MenuItem,\r\n    Paper,\r\n    TableContainer, Typography\r\n} from '@mui/material';\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { getAllCategory } from '../action/categoryAction';\r\nimport { checkIsOpen } from '../action/evaluateAction';\r\nimport Layout from '../component/Layout';\r\nimport MyButton from '../component/UI/MyButton';\r\nimport MySelect from '../component/UI/MySelect';\r\nimport { CategoryContext } from '../contextAPI/CategoryContext';\r\nimport { InfoContext } from '../contextAPI/InfoContext';\r\nimport { LoadingContext } from '../contextAPI/LoadingContext';\r\nimport { SnackbarContext } from '../contextAPI/SnackbarContext';\r\nimport axios from '../helper/axios';\r\nimport { getLocaleDate, getTimeWithEndHour, getTimeWithStartHour } from '../utils/utils';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    header: {\r\n        marginBottom: '40px'\r\n    },\r\n    headerContent: {\r\n        textTransform: 'uppercase',\r\n        fontWeight: '600',\r\n    },\r\n    table: {\r\n        width: '100%',\r\n        backgroundColor: 'white',\r\n        marginTop: '18px',\r\n    },\r\n    paper: {\r\n        padding: '16px',\r\n        marginBottom: '16px',\r\n    },\r\n    flexContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        flexWrap: 'wrap',\r\n        margin: '20px 0'\r\n    },\r\n    inputSelect: {\r\n        marginRight: '20px',\r\n        marginLeft: '16px',\r\n    },\r\n    paperStatistic: {\r\n        padding: '8px',\r\n        margin: '0 8px',\r\n    },\r\n    paperWrapper: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    status: {\r\n        cursor: \"default\",\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.common.white\r\n        }\r\n    }\r\n}))\r\n\r\nconst EvaluateDepartment = () => {\r\n    const classes = useStyles();\r\n\r\n    // ContextAPI\r\n    const { info, infoDispatch } = useContext(InfoContext);\r\n    const { category, categoryDispatch } = useContext(CategoryContext);\r\n    const { openSnackbar, openSnackbarDispatch } = useContext(SnackbarContext)\r\n    const { loading, loadingDispatch } = useContext(LoadingContext)\r\n\r\n    // State\r\n    const columns = [\r\n        { title: \"Mã số Đảng viên\", field: \"MaSoDangVien\", },\r\n        { title: \"Họ tên\", field: \"HoTen\", },\r\n        { title: \"Cá nhân đánh giá\", field: \"TenDanhGiaCaNhan\", },\r\n        { title: \"Bộ môn đánh giá\", field: \"TenDanhGiaBoMon\", },\r\n        {\r\n            title: \"Khoa đánh giá\", field: \"action\",\r\n            render: (params) => {\r\n                return (\r\n                    <MySelect\r\n                        value={params.DanhGiaKhoa || \"0\"}\r\n                        onChange={(e) => handleChange(e, params.MaSoDangVien)}\r\n                    >\r\n                        <MenuItem value=\"0\">Chọn loại</MenuItem>\r\n                        {\r\n                            gradeArr.length > 0 &&\r\n                            gradeArr.map(el => <MenuItem key={el.MaLoai} value={el.MaLoai}>{el.TenLoai}</MenuItem>)\r\n                        }\r\n                    </MySelect>\r\n                )\r\n            }\r\n        }\r\n    ]\r\n\r\n    const [rows, setRows] = useState([])\r\n\r\n    const [year, setYear] = useState((new Date).getFullYear());\r\n    const [grade, setGrade] = useState(\"0\");\r\n    const [gradeArr, setGradeArr] = useState([]);\r\n    const [isEvaluate, setIsEvaluate] = useState(false);\r\n    const [loadingTable, setLoadingTable] = useState(false)\r\n    const [field, setField] = useState('all')\r\n    const [isTime, setIsTime] = useState({ isTime: false, NgayBatDau: \"\", NgayKetThuc: \"\" });\r\n    const [firstLoading, setFirstLoading] = useState(true)\r\n\r\n    // Handle Function\r\n\r\n    const handleChangeField = (e) => {\r\n        setField(e.target.value);\r\n    }\r\n\r\n    const handleChange = async (e, id) => {\r\n        if (e.target.value == 0)\r\n            return;\r\n        try {\r\n            setLoadingTable(true)\r\n            const res = await axios.post('/api/evaluate/create', {\r\n                MaSoDangVien: id,\r\n                Nam: year,\r\n                MaLoai: e.target.value,\r\n                MaDVDG: 3\r\n            })\r\n            if (res.status == 201) {\r\n                await fetchAPI();\r\n                openSnackbarDispatch({\r\n                    type: 'SET_OPEN',\r\n                    payload: {\r\n                        msg: \"Đã đánh giá!\",\r\n                        type: \"success\"\r\n                    }\r\n                })\r\n                setLoadingTable(false)\r\n            }\r\n        } catch (error) {\r\n            openSnackbarDispatch({\r\n                type: 'SET_OPEN',\r\n                payload: {\r\n                    msg: error.response.data.msg,\r\n                    type: \"error\"\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    const fetchAPI = async () => {\r\n        try {\r\n            setLoadingTable(true)\r\n            let res;\r\n            if (field == \"all\")\r\n                res = await axios.get(`/api/evaluate/getbysubject?Nam=${year}`)\r\n            else\r\n                res = await axios.get(`/api/evaluate/getbysubject?MaChiBo=${field}&Nam=${year}`)\r\n            console.log(res.data);\r\n            if (res.status == 200) {\r\n                setRows(res.data);\r\n            }\r\n            setLoadingTable(false);\r\n            // loadingDispatch({ type: 'CLOSE_LOADING' })\r\n        } catch (error) {\r\n            console.log(error.message)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n        fetchAPI();\r\n    }\r\n\r\n    // UseEffect\r\n    useEffect(() => {\r\n        setLoadingTable(true)\r\n        getAllCategory(categoryDispatch, \"grade\");\r\n        getAllCategory(categoryDispatch, \"partycell\");\r\n        checkTime();\r\n    }, [])\r\n\r\n    const checkTime = async () => {\r\n        const res = await checkIsOpen({ id: 3 });\r\n        console.log(res);\r\n        if (res) {\r\n            const { ThoiGianBatDau, ThoiGianKetThuc, Nam } = res\r\n            setYear(Nam)\r\n            let ThoiGianKetThucCheck = getTimeWithEndHour(ThoiGianKetThuc)\r\n            let ThoiGianBatDauCheck = getTimeWithStartHour(ThoiGianBatDau)\r\n\r\n            if (new Date() >= ThoiGianBatDauCheck && new Date() <= ThoiGianKetThucCheck) {\r\n                setIsTime({ isTime: true, ThoiGianBatDau, ThoiGianKetThuc });\r\n            }\r\n        }\r\n        setFirstLoading(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (isTime.isTime) {\r\n            fetchAPI();\r\n        }\r\n    }, [isTime])\r\n\r\n    useEffect(() => {\r\n        if (category.categories.grade.length > 0) {\r\n            category.categories.grade.map(el => {\r\n                el.Nam == year && setGradeArr(el.Data)\r\n            })\r\n        }\r\n    }, [category.categories.grade])\r\n\r\n    useEffect(() => {\r\n        firstLoading\r\n            ? loadingDispatch({ type: 'OPEN_LOADING' })\r\n            : loadingDispatch({ type: 'CLOSE_LOADING' })\r\n    }, [firstLoading])\r\n\r\n    return (\r\n        <>\r\n\r\n            <Layout sidebar>\r\n                {!firstLoading &&\r\n                    <>\r\n                        <div className={classes.header} >\r\n                            <Typography className={classes.headerContent} variant=\"h5\">\r\n                                Khoa đánh giá\r\n                            </Typography>\r\n                        </div>\r\n                        {\r\n                            isTime.isTime ?\r\n                                <>\r\n                                    <Paper variant=\"outlined\" className={classes.paper}>\r\n                                        <Typography style={{ textTransform: 'uppercase', marginBottom: 8 }}>Đánh giá Đảng viên cuối năm</Typography>\r\n                                        <Typography style={{ marginRight: 40 }} variant=\"body1\">Năm: <b>{year}</b></Typography>\r\n                                        <Typography marginBottom={2} variant=\"body1\">\r\n                                            Thời gian: Từ ngày <b>{getLocaleDate(isTime.ThoiGianBatDau)}</b> đến ngày <b>{getLocaleDate(isTime.ThoiGianKetThuc)}</b>\r\n                                        </Typography>\r\n                                        <MySelect\r\n                                            nameTitle=\"Chi bộ\"\r\n                                            value={field}\r\n                                            onChange={handleChangeField}\r\n                                            autowidth\r\n                                        >\r\n                                            <MenuItem value=\"all\">Tất cả</MenuItem>\r\n                                            {\r\n                                                category.categories.partycell.map(el =>\r\n                                                    <MenuItem value={el.MaChiBo} key={el.MaChiBo}>{el.TenChiBo}</MenuItem>\r\n                                                )\r\n                                            }\r\n                                        </MySelect>\r\n                                    </Paper>\r\n                                    <MyButton onClick={handleSubmit} primary>Xem</MyButton>\r\n                                    <TableContainer className=\"decentralization-table\" style={{ maxWidth: \"1170px\", }} >\r\n                                        <MaterialTable\r\n                                            components={{\r\n                                                Container: (props) => <Paper\r\n                                                    {...props}\r\n                                                    className={classes.table}\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            }}\r\n                                            options={{\r\n                                                padding: 'dense'\r\n                                            }}\r\n                                            title={\"Bộ môn đánh giá\"}\r\n                                            columns={columns}\r\n                                            data={rows}\r\n                                            isLoading={loadingTable}\r\n                                        />\r\n                                    </TableContainer>\r\n                                </>\r\n                                :\r\n                                <Paper variant=\"outlined\" className={classes.paper}>\r\n                                    <Grid marginBottom={2}>\r\n                                        <Typography style={{ textTransform: 'uppercase' }}>Đánh giá Đảng viên cuối năm</Typography>\r\n                                        <Typography style={{ marginRight: 40 }} variant=\"body1\">Năm: <b>{year}</b></Typography>\r\n                                        <Typography variant=\"body1\">Chưa đến thời gian đánh giá</Typography>\r\n                                    </Grid>\r\n                                </Paper>\r\n                        }\r\n                    </>\r\n                }\r\n            </Layout>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default EvaluateDepartment;"],"sourceRoot":""}